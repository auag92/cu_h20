function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 13-Nov-2016 19:18:21.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx40 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-12.7795624651024;-8.02472972114725;-4.47119727909281;-3.72117762922308;-4.51301791096288;-3.01263997240765;-2.42480049553745;-0.903467003340177;-0.982011066887872;-0.992950151526825;-0.909871332184159;-0.514509374167196;-0.347829758284772;-0.348533333735644;-0.324828845074708;-0.302944090225973;-0.176788229982257;-0.189022811369171;-0.111438133671731;-0.0965930093379974;-0.0942724030799313;-0.0907632767205718;-0.0599658739522282;-0.0534843942182564;-0.0519742390141951;-0.0374828623272187;-0.0490705698776343;-0.0244317924974365;-0.0260031604377391;-0.0266343974964539;-0.0237256110156129;-0.0179757197278836;-0.0142382038248756;-0.0168055522529993;-0.0129664830097127;-0.00817430420023063;-0.00854127411516475;-0.00765451299310768;-0.00458536837945653;-0.00483752557834656];
x1_step1.gain = [0.0745513300961125;0.131712219594162;0.23701546122223;0.223678801791652;0.232589022354283;0.320251194109121;0.442037555244955;0.718743161768431;0.798852771879617;1.00436079424693;1.25598501058765;2.10840020288283;1.89407524453323;2.72910661561977;3.80345480238336;3.99026705369256;5.27621628941603;6.04666084568524;8.93994649170809;9.59849037657045;10.3309002113336;11.855931971013;13.9569997313043;19.3874018263877;22.8575700618691;26.0945776018096;24.1111970000599;40.4091775586644;28.6063902984765;44.5229310374693;45.5398537665927;55.0581311146987;57.0458451444085;71.8893563202517;78.9510633372986;105.004292880137;116.565720002606;146.750932412307;201.609604024841;224.459390889256];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.071595695859768577;0.026076311014823949;0.057777604658519936;-0.047641260701127008;-2.6005788166488268];
IW1_1 = [0.05324875833439565 1.0679844597973955 -0.26499763979135577 -0.0031166294420667492 -0.45176379565140923 0.410401940834484 -0.063322463665841558 0.23010169763874813 -0.28404002909674803 0.23435492798877233 -0.14157473177166138 0.26476545635035792 -0.3241685314200477 -0.26773079969615476 -0.010991033188891443 -0.36612371119278087 0.94277766347620406 -0.0010628557430917111 -0.42728109470922004 0.025144761305967721 -0.3937128466713764 -0.060705046787006389 -0.069294897297276836 -0.30677286040264962 -0.41286756069871638 -0.12519257847568602 -0.17975949531724134 -0.24728168381309393 -0.0053042936012366376 0.032871062126016308 0.33364275692233564 -0.097856803468110404 -0.3357382868013874 0.39426098553102978 -0.28470156515700312 -0.45132829143399422 0.032559055235084559 0.17291686048312208 -0.22786608657654617 -0.086142357287000926;0.48165509882197266 -0.70732867143551437 -0.17384320942471415 0.074236166905354881 -0.01341697439993916 0.17123314797035291 -0.40726184295242718 0.15993687710723931 0.038762969154416585 -0.34962779331659005 -0.20980589014210804 -0.30592589518682706 0.19726727010646078 0.33200290856153353 0.95642927662834698 -0.60218880338766667 -0.16844593917473194 -0.34130003239188217 -0.64210851528801149 0.89667370376446742 0.092262371267804358 0.35729722386103852 0.27930602879260319 -0.6502783545850197 0.41393713412402233 0.16252834063194063 0.99277599391755977 0.18858028946946856 -0.043758206759665089 -0.38022825375193309 0.45381125331097716 0.057534724986556374 0.63997483072986794 0.075452121885392701 -0.75192994991418027 -0.020110804060572151 -0.22859107727260966 0.14281697935613002 -0.11138750428386444 0.30238186510438769;0.17791373673747526 0.77065168361398428 -0.93811977928730794 -0.38531833251208247 -0.3060054103732604 -0.13044979689559705 -0.38726574382843526 -0.059756493144161607 -0.44742156345452738 -0.009872178624590694 -0.79331667240035897 -0.39384347849030171 -0.39298187630818843 -0.93748274643689322 -0.28075884548851082 0.13436218359935007 0.22098438134423409 -0.026091819623956774 0.4794607173368326 -0.3342015511604885 0.60750094645906516 0.054395624887024742 0.126244355173667 -0.21393641361743757 0.090178919865080517 0.25849509257589615 0.27663092941242184 0.17556062080579354 0.36226236581861326 0.16287685223813983 0.26411435394782001 0.09137726222131734 0.28333352037719695 -0.18455643875708358 0.63342463888559641 0.24610902315810027 -0.085859667435067705 0.27808651816839991 -0.32227997820628757 0.6826095543123939;0.031209406819633238 -1.119297389281108 0.57166700915867463 -0.062195603987248202 0.16408310292755698 -0.054083513561242059 -0.2265924625332548 -0.10709761770929213 -0.10526656967733715 -0.59601204794513174 0.15936663511179236 -0.032098863168034154 0.17031873188598237 0.47655523319131921 0.48211877097813255 -0.068996740488329947 -0.66308174170915135 -0.022153271893833842 -0.27903570934218891 0.5011826735166347 0.074469098639513648 -0.032588209472087001 -0.05755600279560355 -0.049829738747323472 0.34004618333290398 -0.026364677393378149 0.41303311763952666 0.18620775902951939 -0.10677998106724965 -0.19005251543496998 -0.33945754331096833 -0.0013355394770819509 0.18892662589654458 -0.093841740025140688 -0.46789013252354777 0.14479179114969321 0.080928538120505281 -0.23711505515107464 0.14924390319176117 -0.10382348129340783;0.041320431895758146 0.73976968091504491 0.53136546015943731 -0.56284414017802631 -0.29156062538204081 0.093069818772925542 -0.86032734649505072 -0.087261042673043729 -2.1168771456827504 -1.290900569576716 0.40798986073860222 0.21566974913294668 -0.55368469920871566 0.14455578272411379 -0.36106906270334682 -0.34840945356091874 0.20642289932441057 0.14487363360341241 -0.10146321329081072 0.046636221704676246 0.084884654635592832 -1.0030638233910347 -0.45221178402395751 0.0056145648462589326 -0.1736753934241736 0.16686325404630464 -0.24067829501364751 -0.032091675787991381 0.036061000889684947 0.11397478596933863 -0.53226991614564112 -0.50059867467135843 -0.79462113485840025 0.10407053430029499 -0.50250270863194824 0.015724717589204875 0.52937848658972586 -0.48084829039702537 0.096851589359804938 -0.26497764706024768];

% Layer 2
b2 = -1.4936625926585192;
LW2_1 = [1.4312946052050497 -1.038550739543584 1.0081685386644597 2.3288751298779244 -1.8123225678389399];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.25950794957191;
y1_step1.xoffset = 2049.8207;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
